import{a as F}from"./http-DGO8Z9Ft.js";const _=[[103.7970136375021,-2.099493805243171],[103.7956056123781,-2.100113123073712],[103.7944560766404,-2.099757766372572],[103.7907721899283,-2.094288737543678],[103.7913847152913,-2.093848446965421],[103.7900741031851,-2.091685148674769],[103.7899584448721,-2.090192767184724],[103.7897407335286,-2.088288417101904],[103.7883920137978,-2.082811381725315],[103.791848404545,-2.074789406746247],[103.7918828078844,-2.056340784236184],[103.795022144344,-2.05161400835461],[103.7941841253839,-2.04809340158612],[103.7924861554654,-2.036830510546856],[103.7874920367797,-2.007754441173685],[103.783429268785,-1.985516435878517],[103.7790810398948,-1.959727735887211],[103.7742822674068,-1.932313511680166],[103.7707037055431,-1.91050411512238],[103.7651290704715,-1.878671547908528],[103.7599377215253,-1.849010461152737],[103.7550951703012,-1.819631103896117],[103.753524175557,-1.812267041704817],[103.7535253772324,-1.810279647774424],[103.7529017968595,-1.807321328859274],[103.7495290236366,-1.788196330037738],[103.7473356431322,-1.775043979779626],[103.7470295409746,-1.773281484350851],[103.7464094357071,-1.769308920177515],[103.7475269346954,-1.76513745227952],[103.7480522750916,-1.764000620500642],[103.7542746402454,-1.749817212905429],[103.7538737919384,-1.741288740533017],[103.7538832500334,-1.740825295470237],[103.7537680922705,-1.739890588771685],[103.750261451185,-1.722189779035838],[103.7509151700592,-1.719188265203362],[103.7509384245413,-1.718622784503292],[103.7508538419885,-1.718140330192752],[103.7488610110933,-1.715889400757354],[103.7480063514191,-1.711495969107681],[103.7480148950649,-1.710986618631775],[103.7475334812153,-1.709261045954643],[103.7467655889916,-1.700485012755145],[103.7457501660986,-1.697648374135764],[103.7446852534826,-1.679356404058455],[103.7442356195023,-1.665815759582959],[103.743649807928,-1.645676210633454],[103.7436047817333,-1.642864604756159],[103.7432148655316,-1.64002939398771],[103.742102653611,-1.631574300458459],[103.7416343610202,-1.628998376507465],[103.7410623518985,-1.623289390162217],[103.7406325566379,-1.620285703774641],[103.7410126476677,-1.617082459179115],[103.7409868755961,-1.61638190031304],[103.7404417449936,-1.615326250488051],[103.7400770352503,-1.614570027855863],[103.7399404088893,-1.610588768794655],[103.7396343147235,-1.609105428474753],[103.737817547706,-1.604857124764165],[103.7370682916534,-1.604275249095449],[103.7360806394397,-1.603687649503773],[103.7292409933493,-1.595435343502588],[103.7282647442134,-1.591969591359584],[103.7284684399488,-1.586669443912877],[103.7292974688482,-1.584948892213772],[103.7291894895057,-1.581963140783565],[103.730639299715,-1.578459509953649],[103.7309068132321,-1.575898368491551],[103.7286215156747,-1.566231202608301],[103.7297779409311,-1.558598596633427],[103.7288041322423,-1.555249215072028],[103.7229902655567,-1.541444108184013],[103.722363452224,-1.539985677470733],[103.722269993277,-1.529878721427341],[103.7231376439989,-1.526744289160022],[103.7233883363559,-1.526283260630048],[103.723870979535,-1.500868790284734],[103.7242329333083,-1.491886890624902],[103.724206076013,-1.487830846460078],[103.7239264225253,-1.481132147759782],[103.7229793869443,-1.469684282787995],[103.7210687579173,-1.447355321797251],[103.7203709146931,-1.43981900282634],[103.7199325215957,-1.438219719582269],[103.7178135233924,-1.432840378926746],[103.715891334379,-1.425929974003098],[103.7149299426257,-1.423186356594958],[103.7077180568035,-1.402752918909063],[103.6991417163119,-1.374269231198143],[103.6986612830993,-1.372511145182513],[103.6933691775338,-1.356334791510209],[103.6905549226452,-1.346234946055765],[103.6883217629014,-1.340595988840261],[103.6867200131506,-1.335444480462097],[103.6834248611695,-1.325249578201173],[103.6812102337939,-1.318259425785618],[103.6810907769453,-1.316410220634224],[103.6770068988517,-1.305251209361063],[103.6683196924415,-1.278813802141408],[103.659306643262,-1.250409272506048],[103.6556191255425,-1.238581508721734],[103.6553495853275,-1.219861986188938],[103.7003607410499,-1.186103636083334],[103.7012285124331,-1.185567298346018],[103.7162725771665,-1.192858592508117]],z=I=>new Promise(U=>setTimeout(U,I)),G=()=>{const I=(r,k)=>{const l=U(r),a=[];for(let s=0;s<l.length;s++){const p=l[s][0],u=l[s][1],m=l[s][2],x=l[s][3],h=l[s][4],P=l[s][5],D=l[s][6],L=l[s][7],N=l[s][8];if(k==="dynamic")a.push(E(p,u,m,x,h,P,D,L,N));else if(k=="rf_single"){const w="https://apimljmr.findingoillosses.com/jmr/predict/randfor/single",S={spot1:p,spot2:u,spot3:m,spot4:x};F.post(w,S).then(y=>{const j=y.data.results;for(const d in j){const e=parseFloat(j[d].lokasi),c=j[d].status,t=j[d].titik,M=110,f=null;let g="",b,n;isNaN(e)?(n=!1,b={message:"Probabilitas yang terjadi",probabilities:["Tidak terdapat kebocoran","Start/Stop pompa","Switch tangki"],useMap:!1,leak:!1},a.push({suspectLocation:b,tap:n,y:e,status:c,titik:t})):(e<=0?(n=!1,b={message:"Probabilitas yang terjadi",probabilities:["Tidak terdapat kebocoran","Start/Stop pompa","Switch tangki"],useMap:!1,leak:!1}):e>=M?(n=!1,b={message:"Probabilitas yang terjadi",probabilities:["Tidak terdapat kebocoran","Start/Stop pompa","Switch tangki"],useMap:!1,leak:!1}):(n=!0,g=T(e*1e3,_),b={message:"Terdapat indikasi kebocoran",leak:!0,useMap:!0,leakData:{leak_point:e,pu_location:f,coordinate:g}}),g?a.push({suspectLocation:b,tap:n,y:e,mapsLink:g}):a.push({suspectLocation:b,tap:n,y:e}))}}).catch(y=>{console.log(y)})}else if(k=="lr_single"){const w="https://apimljmr.findingoillosses.com/jmr/predict/randfor/single",S={spot1:p,spot2:u,spot3:m,spot4:x};F.post(w,S).then(y=>{const j=y.data.results;for(const d in j){const e=parseFloat(j[d].lokasi),c=j[d].status,t=j[d].titik,M=110,f=null;let g="",b,n;isNaN(e)?(n=!1,b={message:"Probabilitas yang terjadi",probabilities:["Tidak terdapat kebocoran","Start/Stop pompa","Switch tangki"],useMap:!1,leak:!1},a.push({suspectLocation:b,tap:n,y:e,status:c,titik:t})):(e<=0?(n=!1,b={message:"Probabilitas yang terjadi",probabilities:["Tidak terdapat kebocoran","Start/Stop pompa","Switch tangki"],useMap:!1,leak:!1}):e>=M?(n=!1,b={message:"Probabilitas yang terjadi",probabilities:["Tidak terdapat kebocoran","Start/Stop pompa","Switch tangki"],useMap:!1,leak:!1}):(n=!0,g=T(e*1e3,_),b={message:"Terdapat indikasi kebocoran",leak:!0,useMap:!0,leakData:{leak_point:e,pu_location:f,coordinate:g}}),g?a.push({suspectLocation:b,tap:n,y:e,mapsLink:g}):a.push({suspectLocation:b,tap:n,y:e}))}}).catch(y=>{console.log(y)})}}return a},U=r=>{const k=[],l=[];Object.keys(r).forEach(s=>{if(r[s].type==="normal")for(let p=0;p<r[s].data.length;p++)k.push(r[s].data[p].avgPsiValues);else{const p=[];for(let u=0;u<r[s].data.length;u++)p.push(r[s].data[u].avgPsiValues);l.push(p)}});const a=[];for(let s=0;s<l.length;s++){const p=[];for(let u=0;u<9;u++){const m=Math.max(0,k[u]-l[s][u]).toFixed(2);p.push(m)}a.push(p)}return a},O=(r,k)=>new Promise(async(l,a)=>{try{const s=[],p=["rf_single","rf4_multi","lr_single","dt_single","dt4_multi","dynamic"],u=["https://apimljmr.findingoillosses.com/jmr/predict/randfor/single","https://apimljmr.findingoillosses.com/jmr/predict/randfor/multi4","https://apimljmr.findingoillosses.com/jmr/predict/lreg/single","https://apimljmr.findingoillosses.com/jmr/predict/dtree/single","https://apimljmr.findingoillosses.com/jmr/predict/dtree/multi4","dynamic"],m=p.indexOf(k);if(m===-1){a(new Error("Invalid prediction type"));return}const x=u[m],h=U(r),P=h[0][0],D=h[0][1],L=h[0][2],N=h[0][3],w=h[0][4],S=h[0][5],y=h[0][6],j=h[0][7],d=h[0][8],e={spot1:P,spot2:D,spot3:L,spot4:N,spot5:w,spot6:S,spot7:y,spot8:j,spot9:d};if(u[m]==="dynamic"){await z(50),s.push(E(P,D,L,N,w,S,y,j,d)),l(s);return}else F.post(x,e).then(c=>{const t=c.data.results;for(const M in t){const f=parseFloat(t[M].lokasi),g=t[M].status,b=t[M].titik,n=110,i=null;let o="",A,R;isNaN(f)?(R=!1,A={message:"Probabilitas yang terjadi",probabilities:["Tidak terdapat kebocoran","Start/Stop pompa","Switch tangki"],useMap:!1,leak:!1},s.push({drop:M,suspectLocation:A,tap:R,y:f,status:g,titik:b})):(f<=0?(R=!1,A={message:"Probabilitas yang terjadi",probabilities:["Tidak terdapat kebocoran","Start/Stop pompa","Switch tangki"],useMap:!1,leak:!1}):f>=n?(R=!1,A={message:"Probabilitas yang terjadi",probabilities:["Tidak terdapat kebocoran","Start/Stop pompa","Switch tangki"],useMap:!1,leak:!1}):(R=!0,o=T(f*1e3,_),A={message:"Terdapat indikasi kebocoran",leak:!0,useMap:!0,leakData:{leak_point:f,pu_location:i,coordinate:o}}),o?s.push({drop:M,suspectLocation:A,tap:R,y:f,mapsLink:o}):s.push({drop:M,suspectLocation:A,tap:R,y:f}))}l(s)})}catch(s){a(s)}}),v=(r,k)=>{const l=U(r),a=[];let s=1;for(let p=0;p<l.length;p++){const u=l[p][0],m=l[p][1],x=l[p][2],h=l[p][3],P=l[p][4],D=l[p][5],L=l[p][6],N=l[p][7],w=l[p][8],S=s;if(k==="lr_lasso"){const y="https://apimljmr.findingoillosses.com/jmr/predict/lr/lasso",j={spot1:u,spot2:m,spot3:x,spot4:h,spot5:P,spot6:D,spot7:L,spot8:N,spot9:w};F.post(y,j).then(d=>{const e=d.data.results;for(const c in e){const t=parseFloat(e[c].lokasi),M=e[c].status,f=e[c].titik,g=109.3,b=null;let n="",i,o;isNaN(t)?(o=!1,i={message:"Probabilitas yang terjadi",probabilities:["Tidak terdapat kebocoran","Start/Stop pompa","Switch tangki"],useMap:!1,leak:!1},a.push({drop:S,suspectLocation:i,tap:o,y:t,status:M,titik:f})):(t<=0?(o=!1,i={message:"Probabilitas yang terjadi",probabilities:["Tidak terdapat kebocoran","Start/Stop pompa","Switch tangki"],useMap:!1,leak:!1}):t>=g?(o=!1,i={message:"Probabilitas yang terjadi",probabilities:["Tidak terdapat kebocoran","Start/Stop pompa","Switch tangki"],useMap:!1,leak:!1}):(o=!0,n=T(t*1e3,_),i={message:"Terdapat indikasi kebocoran",leak:!0,useMap:!0,leakData:{leak_point:t,pu_location:b,coordinate:n}}),n?a.push({drop:S,suspectLocation:i,tap:o,y:t,mapsLink:n}):a.push({drop:S,suspectLocation:i,tap:o,y:t}))}}).catch(d=>{console.log(d)}),s+=1}else if(k==="rf_single"){const y="https://apimljmr.findingoillosses.com/jmr/predict/randfor/single",j={spot1:u,spot2:m,spot3:x,spot4:h};F.post(y,j).then(d=>{const e=d.data.results;for(const c in e){const t=parseFloat(e[c].lokasi),M=e[c].status,f=e[c].titik,g=109.3,b=null;let n="",i,o;isNaN(t)?(o=!1,i={message:"Probabilitas yang terjadi",probabilities:["Tidak terdapat kebocoran","Start/Stop pompa","Switch tangki"],useMap:!1,leak:!1},a.push({drop:S,suspectLocation:i,tap:o,y:t,status:M,titik:f})):(t<=0?(o=!1,i={message:"Probabilitas yang terjadi",probabilities:["Tidak terdapat kebocoran","Start/Stop pompa","Switch tangki"],useMap:!1,leak:!1}):t>=g?(o=!1,i={message:"Probabilitas yang terjadi",probabilities:["Tidak terdapat kebocoran","Start/Stop pompa","Switch tangki"],useMap:!1,leak:!1}):(o=!0,n=T(t*1e3,_),i={message:"Terdapat indikasi kebocoran",leak:!0,useMap:!0,leakData:{leak_point:t,pu_location:b,coordinate:n}}),n?a.push({drop:S,suspectLocation:i,tap:o,y:t,mapsLink:n}):a.push({drop:S,suspectLocation:i,tap:o,y:t}))}}).catch(d=>{console.log(d)}),s+=1}if(k==="rf4_multi"){const y="https://apimljmr.findingoillosses.com/jmr/predict/randfor/multi4",j={spot1:u,spot2:m,spot3:x,spot4:h};F.post(y,j).then(d=>{const e=d.data.results;for(const c in e){const t=parseFloat(e[c].lokasi),M=e[c].status,f=e[c].titik,g=109.3,b=null;let n="",i,o;isNaN(t)?(o=!1,i={message:"Probabilitas yang terjadi",probabilities:["Tidak terdapat kebocoran","Start/Stop pompa","Switch tangki"],useMap:!1,leak:!1},a.push({drop:S,suspectLocation:i,tap:o,y:t,status:M,titik:f})):(t<=0?(o=!1,i={message:"Probabilitas yang terjadi",probabilities:["Tidak terdapat kebocoran","Start/Stop pompa","Switch tangki"],useMap:!1,leak:!1}):t>=g?(o=!1,i={message:"Probabilitas yang terjadi",probabilities:["Tidak terdapat kebocoran","Start/Stop pompa","Switch tangki"],useMap:!1,leak:!1}):(o=!0,n=T(t*1e3,_),i={message:"Terdapat indikasi kebocoran",leak:!0,useMap:!0,leakData:{leak_point:t,pu_location:b,coordinate:n}}),n?a.push({drop:S,suspectLocation:i,tap:o,y:t,mapsLink:n}):a.push({drop:S,suspectLocation:i,tap:o,y:t}))}}).catch(d=>{console.log(d)}),s+=1}else if(k=="lr_single"){const y="https://apimljmr.findingoillosses.com/jmr/predict/lreg/single",j={spot1:u,spot2:m,spot3:x,spot4:h};F.post(y,j).then(d=>{const e=d.data.results;for(const c in e){const t=parseFloat(e[c].lokasi),M=e[c].status,f=e[c].titik,g=109.3,b=null;let n="",i,o;isNaN(t)?(o=!1,i={message:"Probabilitas yang terjadi",probabilities:["Tidak terdapat kebocoran","Start/Stop pompa","Switch tangki"],useMap:!1,leak:!1},a.push({drop:S,suspectLocation:i,tap:o,y:t,status:M,titik:f})):(t<=0?(o=!1,i={message:"Probabilitas yang terjadi",probabilities:["Tidak terdapat kebocoran","Start/Stop pompa","Switch tangki"],useMap:!1,leak:!1}):t>=g?(o=!1,i={message:"Probabilitas yang terjadi",probabilities:["Tidak terdapat kebocoran","Start/Stop pompa","Switch tangki"],useMap:!1,leak:!1}):(o=!0,n=T(t*1e3,_),i={message:"Terdapat indikasi kebocoran",leak:!0,useMap:!0,leakData:{leak_point:t,pu_location:b,coordinate:n}}),n?a.push({drop:S,suspectLocation:i,tap:o,y:t,mapsLink:n}):a.push({drop:S,suspectLocation:i,tap:o,y:t}))}}).catch(d=>{console.log(d)}),s+=1}else if(k=="dt_single"){const y="https://apimljmr.findingoillosses.com/jmr/predict/dtree/single",j={spot1:u,spot2:m,spot3:x,spot4:h};F.post(y,j).then(d=>{const e=d.data.results;for(const c in e){const t=parseFloat(e[c].lokasi),M=e[c].status,f=e[c].titik,g=109.3,b=null;let n="",i,o;isNaN(t)?(o=!1,i={message:"Probabilitas yang terjadi",probabilities:["Tidak terdapat kebocoran","Start/Stop pompa","Switch tangki"],useMap:!1,leak:!1},a.push({drop:S,suspectLocation:i,tap:o,y:t,status:M,titik:f})):(t<=0?(o=!1,i={message:"Probabilitas yang terjadi",probabilities:["Tidak terdapat kebocoran","Start/Stop pompa","Switch tangki"],useMap:!1,leak:!1}):t>=g?(o=!1,i={message:"Probabilitas yang terjadi",probabilities:["Tidak terdapat kebocoran","Start/Stop pompa","Switch tangki"],useMap:!1,leak:!1}):(o=!0,n=T(t*1e3,_),i={message:"Terdapat indikasi kebocoran",leak:!0,useMap:!0,leakData:{leak_point:t,pu_location:b,coordinate:n}}),n?a.push({drop:S,suspectLocation:i,tap:o,y:t,mapsLink:n}):a.push({drop:S,suspectLocation:i,tap:o,y:t}))}}).catch(d=>{console.log(d)}),s+=1}else if(k=="dt4_multi"){const y="https://apimljmr.findingoillosses.com/jmr/predict/dtree/multi4",j={spot1:u,spot2:m,spot3:x,spot4:h};F.post(y,j).then(d=>{const e=d.data.results;for(const c in e){const t=parseFloat(e[c].lokasi),M=e[c].status,f=e[c].titik,g=109.3,b=null;let n="",i,o;isNaN(t)?(o=!1,i={message:"Probabilitas yang terjadi",probabilities:["Tidak terdapat kebocoran","Start/Stop pompa","Switch tangki"],useMap:!1,leak:!1},a.push({drop:S,suspectLocation:i,tap:o,y:t,status:M,titik:f})):(t<=0?(o=!1,i={message:"Probabilitas yang terjadi",probabilities:["Tidak terdapat kebocoran","Start/Stop pompa","Switch tangki"],useMap:!1,leak:!1}):t>=g?(o=!1,i={message:"Probabilitas yang terjadi",probabilities:["Tidak terdapat kebocoran","Start/Stop pompa","Switch tangki"],useMap:!1,leak:!1}):(o=!0,n=T(t*1e3,_),i={message:"Terdapat indikasi kebocoran",leak:!0,useMap:!0,leakData:{leak_point:t,pu_location:b,coordinate:n}}),n?a.push({drop:S,suspectLocation:i,tap:o,y:t,mapsLink:n}):a.push({drop:S,suspectLocation:i,tap:o,y:t}))}}).catch(d=>{console.log(d)}),s+=1}else k=="dynamic"&&a.push(E(u,m,x,h,P,D,L,N,w,S))}return a},E=(r,k,l,a,s,p,u,m,x,h=1)=>{const P=r,D=k,L=l,N=a,w=s,S=p,y=u,j=m,d=x,e=110;let c=(e+-11.86*P+6.44*D+3.78*L+-8.56*N+-.78*w+9.17*S+-8.69*y+3.78*j+1.52*d).toFixed(2);c=parseFloat(c);const t=null;let M="",f,g;return isNaN(c)?(g=!1,f={message:"Probabilitas yang terjadi",probabilities:["Tidak terdapat kebocoran","Start/Stop pompa","Switch tangki"],useMap:!1,leak:!1},{drop:h,suspectLocation:f,tap:g,y:c}):(c<=0?(g=!1,f={message:"Probabilitas yang terjadi",probabilities:["Tidak terdapat kebocoran","Start/Stop pompa","Switch tangki"],useMap:!1,leak:!1}):c>=e?(g=!1,f={message:"Probabilitas yang terjadi",probabilities:["Tidak terdapat kebocoran","Start/Stop pompa","Switch tangki"],useMap:!1,leak:!1}):(g=!0,M=T(c*1e3,_),f={message:"Terdapat indikasi kebocoran",leak:!0,useMap:!0,leakData:{leak_point:c,pu_location:t,coordinate:M}}),M?{drop:h,suspectLocation:f,tap:g,y:c,mapsLink:M}:{drop:h,suspectLocation:f,tap:g,y:c})},T=(r,k)=>{const s=q(k,r);return{latitude:s[0],longitude:s[1]}},q=(r,k)=>{const l=r.length;for(let a=0;a<l-1;a++){const s=B(r[a][1],r[a][0],r[a+1][1],r[a+1][0]);if(k<=s){const p=J(r[a][1],r[a][0],r[a+1][1],r[a+1][0]);return V(r[a][1],r[a][0],k,p)}else k-=s}return r[l-1]},J=(r,k,l,a)=>{const s=P=>P*(Math.PI/180),p=P=>P*(180/Math.PI);r=s(r),l=s(l);const u=s(a-k),m=Math.sin(u)*Math.cos(l),x=Math.cos(r)*Math.sin(l)-Math.sin(r)*Math.cos(l)*Math.cos(u),h=Math.atan2(m,x);return(p(h)+360)%360},V=(r,k,l,a)=>{const p=P=>P*(Math.PI/180),u=P=>P*(180/Math.PI);r=p(r),k=p(k),a=p(a);const m=l/6371e3,x=Math.asin(Math.sin(r)*Math.cos(m)+Math.cos(r)*Math.sin(m)*Math.cos(a)),h=k+Math.atan2(Math.sin(a)*Math.sin(m)*Math.cos(r),Math.cos(m)-Math.sin(r)*Math.sin(x));return[u(x),u(h)]},B=(r,k,l,a)=>{const p=P=>P*(Math.PI/180),u=p(l-r),m=p(a-k),x=Math.sin(u/2)**2+Math.cos(p(r))*Math.cos(p(l))*Math.sin(m/2)**2;return 6371e3*(2*Math.atan2(Math.sqrt(x),Math.sqrt(1-x)))};return{buildDeltas:U,predict:I,mlpredict:v,asyncPredict:O}};export{_ as J,G as u};
