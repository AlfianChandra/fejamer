import{a as T}from"./http-BkVOjm10.js";const D=[[103.7970136375021,-2.099493805243171],[103.7956056123781,-2.100113123073712],[103.7944560766404,-2.099757766372572],[103.7907721899283,-2.094288737543678],[103.7913847152913,-2.093848446965421],[103.7900741031851,-2.091685148674769],[103.7899584448721,-2.090192767184724],[103.7897407335286,-2.088288417101904],[103.7883920137978,-2.082811381725315],[103.791848404545,-2.074789406746247],[103.7918828078844,-2.056340784236184],[103.795022144344,-2.05161400835461],[103.7941841253839,-2.04809340158612],[103.7924861554654,-2.036830510546856],[103.7874920367797,-2.007754441173685],[103.783429268785,-1.985516435878517],[103.7790810398948,-1.959727735887211],[103.7742822674068,-1.932313511680166],[103.7707037055431,-1.91050411512238],[103.7651290704715,-1.878671547908528],[103.7599377215253,-1.849010461152737],[103.7550951703012,-1.819631103896117],[103.753524175557,-1.812267041704817],[103.7535253772324,-1.810279647774424],[103.7529017968595,-1.807321328859274],[103.7495290236366,-1.788196330037738],[103.7473356431322,-1.775043979779626],[103.7470295409746,-1.773281484350851],[103.7464094357071,-1.769308920177515],[103.7475269346954,-1.76513745227952],[103.7480522750916,-1.764000620500642],[103.7542746402454,-1.749817212905429],[103.7538737919384,-1.741288740533017],[103.7538832500334,-1.740825295470237],[103.7537680922705,-1.739890588771685],[103.750261451185,-1.722189779035838],[103.7509151700592,-1.719188265203362],[103.7509384245413,-1.718622784503292],[103.7508538419885,-1.718140330192752],[103.7488610110933,-1.715889400757354],[103.7480063514191,-1.711495969107681],[103.7480148950649,-1.710986618631775],[103.7475334812153,-1.709261045954643],[103.7467655889916,-1.700485012755145],[103.7457501660986,-1.697648374135764],[103.7446852534826,-1.679356404058455],[103.7442356195023,-1.665815759582959],[103.743649807928,-1.645676210633454],[103.7436047817333,-1.642864604756159],[103.7432148655316,-1.64002939398771],[103.742102653611,-1.631574300458459],[103.7416343610202,-1.628998376507465],[103.7410623518985,-1.623289390162217],[103.7406325566379,-1.620285703774641],[103.7410126476677,-1.617082459179115],[103.7409868755961,-1.61638190031304],[103.7404417449936,-1.615326250488051],[103.7400770352503,-1.614570027855863],[103.7399404088893,-1.610588768794655],[103.7396343147235,-1.609105428474753],[103.737817547706,-1.604857124764165],[103.7370682916534,-1.604275249095449],[103.7360806394397,-1.603687649503773],[103.7292409933493,-1.595435343502588],[103.7282647442134,-1.591969591359584],[103.7284684399488,-1.586669443912877],[103.7292974688482,-1.584948892213772],[103.7291894895057,-1.581963140783565],[103.730639299715,-1.578459509953649],[103.7309068132321,-1.575898368491551],[103.7286215156747,-1.566231202608301],[103.7297779409311,-1.558598596633427],[103.7288041322423,-1.555249215072028],[103.7229902655567,-1.541444108184013],[103.722363452224,-1.539985677470733],[103.722269993277,-1.529878721427341],[103.7231376439989,-1.526744289160022],[103.7233883363559,-1.526283260630048],[103.723870979535,-1.500868790284734],[103.7242329333083,-1.491886890624902],[103.724206076013,-1.487830846460078],[103.7239264225253,-1.481132147759782],[103.7229793869443,-1.469684282787995],[103.7210687579173,-1.447355321797251],[103.7203709146931,-1.43981900282634],[103.7199325215957,-1.438219719582269],[103.7178135233924,-1.432840378926746],[103.715891334379,-1.425929974003098],[103.7149299426257,-1.423186356594958],[103.7077180568035,-1.402752918909063],[103.6991417163119,-1.374269231198143],[103.6986612830993,-1.372511145182513],[103.6933691775338,-1.356334791510209],[103.6905549226452,-1.346234946055765],[103.6883217629014,-1.340595988840261],[103.6867200131506,-1.335444480462097],[103.6834248611695,-1.325249578201173],[103.6812102337939,-1.318259425785618],[103.6810907769453,-1.316410220634224],[103.6770068988517,-1.305251209361063],[103.6683196924415,-1.278813802141408],[103.659306643262,-1.250409272506048],[103.6556191255425,-1.238581508721734],[103.6553495853275,-1.219861986188938],[103.7003607410499,-1.186103636083334],[103.7012285124331,-1.185567298346018],[103.7162725771665,-1.192858592508117]],v=N=>new Promise(x=>setTimeout(x,N)),J=()=>{const N=(o,k)=>{const d=x(o),t=[];for(let e=0;e<d.length;e++){const c=d[e][0],u=d[e][1],f=d[e][2],S=d[e][3];if(k==="dynamic")t.push(F(c,u,f,S));else if(k=="rf_single"){const h="https://apimljmr.findingoillosses.com/jmr/predict/randfor/single",n={spot1:c,spot2:u,spot3:f,spot4:S};T.post(h,n).then(M=>{const g=M.data.results;for(const p in g){const s=parseFloat(g[p].lokasi),b=g[p].status,a=g[p].titik,P=110,j=null;let y="",m,l;isNaN(s)?(l=!1,m={message:"Probabilitas yang terjadi",probabilities:["Tidak terdapat kebocoran","Start/Stop pompa","Switch tangki"],useMap:!1,leak:!1},t.push({suspectLocation:m,tap:l,y:s,status:b,titik:a})):(s<=0?(l=!1,m={message:"Probabilitas yang terjadi",probabilities:["Tidak terdapat kebocoran","Start/Stop pompa","Switch tangki"],useMap:!1,leak:!1}):s>=P?(l=!1,m={message:"Probabilitas yang terjadi",probabilities:["Tidak terdapat kebocoran","Start/Stop pompa","Switch tangki"],useMap:!1,leak:!1}):(l=!0,y=w(s*1e3,D),m={message:"Terdapat indikasi kebocoran",leak:!0,useMap:!0,leakData:{leak_point:s,pu_location:j,coordinate:y}}),y?t.push({suspectLocation:m,tap:l,y:s,mapsLink:y}):t.push({suspectLocation:m,tap:l,y:s}))}}).catch(M=>{console.log(M)})}else if(k=="lr_single"){const h="https://apimljmr.findingoillosses.com/jmr/predict/randfor/single",n={spot1:c,spot2:u,spot3:f,spot4:S};T.post(h,n).then(M=>{const g=M.data.results;for(const p in g){const s=parseFloat(g[p].lokasi),b=g[p].status,a=g[p].titik,P=110,j=null;let y="",m,l;isNaN(s)?(l=!1,m={message:"Probabilitas yang terjadi",probabilities:["Tidak terdapat kebocoran","Start/Stop pompa","Switch tangki"],useMap:!1,leak:!1},t.push({suspectLocation:m,tap:l,y:s,status:b,titik:a})):(s<=0?(l=!1,m={message:"Probabilitas yang terjadi",probabilities:["Tidak terdapat kebocoran","Start/Stop pompa","Switch tangki"],useMap:!1,leak:!1}):s>=P?(l=!1,m={message:"Probabilitas yang terjadi",probabilities:["Tidak terdapat kebocoran","Start/Stop pompa","Switch tangki"],useMap:!1,leak:!1}):(l=!0,y=w(s*1e3,D),m={message:"Terdapat indikasi kebocoran",leak:!0,useMap:!0,leakData:{leak_point:s,pu_location:j,coordinate:y}}),y?t.push({suspectLocation:m,tap:l,y:s,mapsLink:y}):t.push({suspectLocation:m,tap:l,y:s}))}}).catch(M=>{console.log(M)})}}return t},x=o=>{const k=[],d=[];Object.keys(o).forEach(e=>{if(o[e].type==="normal")for(let c=0;c<o[e].data.length;c++)k.push(o[e].data[c].avgPsiValues);else{const c=[];for(let u=0;u<o[e].data.length;u++)c.push(o[e].data[u].avgPsiValues);d.push(c)}});const t=[];for(let e=0;e<d.length;e++){const c=[];for(let u=0;u<9;u++){const f=Math.max(0,k[u]-d[e][u]).toFixed(2);c.push(f)}t.push(c)}return t},R=(o,k)=>new Promise(async(d,t)=>{try{const e=[],c=["rf_single","rf4_multi","lr_single","dt_single","dt4_multi","dynamic"],u=["https://apimljmr.findingoillosses.com/jmr/predict/randfor/single","https://apimljmr.findingoillosses.com/jmr/predict/randfor/multi4","https://apimljmr.findingoillosses.com/jmr/predict/lreg/single","https://apimljmr.findingoillosses.com/jmr/predict/dtree/single","https://apimljmr.findingoillosses.com/jmr/predict/dtree/multi4","dynamic"],f=c.indexOf(k);if(f===-1){t(new Error("Invalid prediction type"));return}const S=u[f],h=x(o),n=h[0][0],M=h[0][1],g=h[0][2],p=h[0][3],s={spot1:n,spot2:M,spot3:g,spot4:p};if(u[f]==="dynamic"){await v(50),e.push(F(n,M,g,p)),d(e);return}else T.post(S,s).then(b=>{const a=b.data.results;for(const P in a){const j=parseFloat(a[P].lokasi),y=a[P].status,m=a[P].titik,l=110,r=null;let i="",_,L;isNaN(j)?(L=!1,_={message:"Probabilitas yang terjadi",probabilities:["Tidak terdapat kebocoran","Start/Stop pompa","Switch tangki"],useMap:!1,leak:!1},e.push({drop:P,suspectLocation:_,tap:L,y:j,status:y,titik:m})):(j<=0?(L=!1,_={message:"Probabilitas yang terjadi",probabilities:["Tidak terdapat kebocoran","Start/Stop pompa","Switch tangki"],useMap:!1,leak:!1}):j>=l?(L=!1,_={message:"Probabilitas yang terjadi",probabilities:["Tidak terdapat kebocoran","Start/Stop pompa","Switch tangki"],useMap:!1,leak:!1}):(L=!0,i=w(j*1e3,D),_={message:"Terdapat indikasi kebocoran",leak:!0,useMap:!0,leakData:{leak_point:j,pu_location:r,coordinate:i}}),i?e.push({drop:P,suspectLocation:_,tap:L,y:j,mapsLink:i}):e.push({drop:P,suspectLocation:_,tap:L,y:j}))}d(e)})}catch(e){t(e)}}),A=(o,k)=>{const d=x(o),t=[];let e=1;for(let c=0;c<d.length;c++){const u=d[c][0],f=d[c][1],S=d[c][2],h=d[c][3],n=e;if(k==="rf_single"){const M="https://apimljmr.findingoillosses.com/jmr/predict/randfor/single",g={spot1:u,spot2:f,spot3:S,spot4:h};T.post(M,g).then(p=>{const s=p.data.results;for(const b in s){const a=parseFloat(s[b].lokasi),P=s[b].status,j=s[b].titik,y=109.3,m=null;let l="",r,i;isNaN(a)?(i=!1,r={message:"Probabilitas yang terjadi",probabilities:["Tidak terdapat kebocoran","Start/Stop pompa","Switch tangki"],useMap:!1,leak:!1},t.push({drop:n,suspectLocation:r,tap:i,y:a,status:P,titik:j})):(a<=0?(i=!1,r={message:"Probabilitas yang terjadi",probabilities:["Tidak terdapat kebocoran","Start/Stop pompa","Switch tangki"],useMap:!1,leak:!1}):a>=y?(i=!1,r={message:"Probabilitas yang terjadi",probabilities:["Tidak terdapat kebocoran","Start/Stop pompa","Switch tangki"],useMap:!1,leak:!1}):(i=!0,l=w(a*1e3,D),r={message:"Terdapat indikasi kebocoran",leak:!0,useMap:!0,leakData:{leak_point:a,pu_location:m,coordinate:l}}),l?t.push({drop:n,suspectLocation:r,tap:i,y:a,mapsLink:l}):t.push({drop:n,suspectLocation:r,tap:i,y:a}))}}).catch(p=>{console.log(p)}),e+=1}if(k==="rf4_multi"){const M="https://apimljmr.findingoillosses.com/jmr/predict/randfor/multi4",g={spot1:u,spot2:f,spot3:S,spot4:h};T.post(M,g).then(p=>{const s=p.data.results;for(const b in s){const a=parseFloat(s[b].lokasi),P=s[b].status,j=s[b].titik,y=109.3,m=null;let l="",r,i;isNaN(a)?(i=!1,r={message:"Probabilitas yang terjadi",probabilities:["Tidak terdapat kebocoran","Start/Stop pompa","Switch tangki"],useMap:!1,leak:!1},t.push({drop:n,suspectLocation:r,tap:i,y:a,status:P,titik:j})):(a<=0?(i=!1,r={message:"Probabilitas yang terjadi",probabilities:["Tidak terdapat kebocoran","Start/Stop pompa","Switch tangki"],useMap:!1,leak:!1}):a>=y?(i=!1,r={message:"Probabilitas yang terjadi",probabilities:["Tidak terdapat kebocoran","Start/Stop pompa","Switch tangki"],useMap:!1,leak:!1}):(i=!0,l=w(a*1e3,D),r={message:"Terdapat indikasi kebocoran",leak:!0,useMap:!0,leakData:{leak_point:a,pu_location:m,coordinate:l}}),l?t.push({drop:n,suspectLocation:r,tap:i,y:a,mapsLink:l}):t.push({drop:n,suspectLocation:r,tap:i,y:a}))}}).catch(p=>{console.log(p)}),e+=1}else if(k=="lr_single"){const M="https://apimljmr.findingoillosses.com/jmr/predict/lreg/single",g={spot1:u,spot2:f,spot3:S,spot4:h};T.post(M,g).then(p=>{const s=p.data.results;for(const b in s){const a=parseFloat(s[b].lokasi),P=s[b].status,j=s[b].titik,y=109.3,m=null;let l="",r,i;isNaN(a)?(i=!1,r={message:"Probabilitas yang terjadi",probabilities:["Tidak terdapat kebocoran","Start/Stop pompa","Switch tangki"],useMap:!1,leak:!1},t.push({drop:n,suspectLocation:r,tap:i,y:a,status:P,titik:j})):(a<=0?(i=!1,r={message:"Probabilitas yang terjadi",probabilities:["Tidak terdapat kebocoran","Start/Stop pompa","Switch tangki"],useMap:!1,leak:!1}):a>=y?(i=!1,r={message:"Probabilitas yang terjadi",probabilities:["Tidak terdapat kebocoran","Start/Stop pompa","Switch tangki"],useMap:!1,leak:!1}):(i=!0,l=w(a*1e3,D),r={message:"Terdapat indikasi kebocoran",leak:!0,useMap:!0,leakData:{leak_point:a,pu_location:m,coordinate:l}}),l?t.push({drop:n,suspectLocation:r,tap:i,y:a,mapsLink:l}):t.push({drop:n,suspectLocation:r,tap:i,y:a}))}}).catch(p=>{console.log(p)}),e+=1}else if(k=="dt_single"){const M="https://apimljmr.findingoillosses.com/jmr/predict/dtree/single",g={spot1:u,spot2:f,spot3:S,spot4:h};T.post(M,g).then(p=>{const s=p.data.results;for(const b in s){const a=parseFloat(s[b].lokasi),P=s[b].status,j=s[b].titik,y=109.3,m=null;let l="",r,i;isNaN(a)?(i=!1,r={message:"Probabilitas yang terjadi",probabilities:["Tidak terdapat kebocoran","Start/Stop pompa","Switch tangki"],useMap:!1,leak:!1},t.push({drop:n,suspectLocation:r,tap:i,y:a,status:P,titik:j})):(a<=0?(i=!1,r={message:"Probabilitas yang terjadi",probabilities:["Tidak terdapat kebocoran","Start/Stop pompa","Switch tangki"],useMap:!1,leak:!1}):a>=y?(i=!1,r={message:"Probabilitas yang terjadi",probabilities:["Tidak terdapat kebocoran","Start/Stop pompa","Switch tangki"],useMap:!1,leak:!1}):(i=!0,l=w(a*1e3,D),r={message:"Terdapat indikasi kebocoran",leak:!0,useMap:!0,leakData:{leak_point:a,pu_location:m,coordinate:l}}),l?t.push({drop:n,suspectLocation:r,tap:i,y:a,mapsLink:l}):t.push({drop:n,suspectLocation:r,tap:i,y:a}))}}).catch(p=>{console.log(p)}),e+=1}else if(k=="dt4_multi"){const M="https://apimljmr.findingoillosses.com/jmr/predict/dtree/multi4",g={spot1:u,spot2:f,spot3:S,spot4:h};T.post(M,g).then(p=>{const s=p.data.results;for(const b in s){const a=parseFloat(s[b].lokasi),P=s[b].status,j=s[b].titik,y=109.3,m=null;let l="",r,i;isNaN(a)?(i=!1,r={message:"Probabilitas yang terjadi",probabilities:["Tidak terdapat kebocoran","Start/Stop pompa","Switch tangki"],useMap:!1,leak:!1},t.push({drop:n,suspectLocation:r,tap:i,y:a,status:P,titik:j})):(a<=0?(i=!1,r={message:"Probabilitas yang terjadi",probabilities:["Tidak terdapat kebocoran","Start/Stop pompa","Switch tangki"],useMap:!1,leak:!1}):a>=y?(i=!1,r={message:"Probabilitas yang terjadi",probabilities:["Tidak terdapat kebocoran","Start/Stop pompa","Switch tangki"],useMap:!1,leak:!1}):(i=!0,l=w(a*1e3,D),r={message:"Terdapat indikasi kebocoran",leak:!0,useMap:!0,leakData:{leak_point:a,pu_location:m,coordinate:l}}),l?t.push({drop:n,suspectLocation:r,tap:i,y:a,mapsLink:l}):t.push({drop:n,suspectLocation:r,tap:i,y:a}))}}).catch(p=>{console.log(p)}),e+=1}else k=="dynamic"&&t.push(F(u,f,S,h))}return t},F=(o,k,d,t,e=1)=>{const c=o,u=k,f=d,S=t,h=110;let n=(h+-15.21*c+9.2*u+-10.5*f+-16.6*S).toFixed(2);n=parseFloat(n);const M=null;let g="",p,s;return isNaN(n)?(s=!1,p={message:"Probabilitas yang terjadi",probabilities:["Tidak terdapat kebocoran","Start/Stop pompa","Switch tangki"],useMap:!1,leak:!1},{drop:e,suspectLocation:p,tap:s,y:n}):(n<=0?(s=!1,p={message:"Probabilitas yang terjadi",probabilities:["Tidak terdapat kebocoran","Start/Stop pompa","Switch tangki"],useMap:!1,leak:!1}):n>=h?(s=!1,p={message:"Probabilitas yang terjadi",probabilities:["Tidak terdapat kebocoran","Start/Stop pompa","Switch tangki"],useMap:!1,leak:!1}):(s=!0,g=w(n*1e3,D),p={message:"Terdapat indikasi kebocoran",leak:!0,useMap:!0,leakData:{leak_point:n,pu_location:M,coordinate:g}}),g?{drop:e,suspectLocation:p,tap:s,y:n,mapsLink:g}:{drop:e,suspectLocation:p,tap:s,y:n})},w=(o,k)=>{const e=I(k,o);return{latitude:e[0],longitude:e[1]}},I=(o,k)=>{const d=o.length;for(let t=0;t<d-1;t++){const e=O(o[t][1],o[t][0],o[t+1][1],o[t+1][0]);if(k<=e){const c=U(o[t][1],o[t][0],o[t+1][1],o[t+1][0]);return E(o[t][1],o[t][0],k,c)}else k-=e}return o[d-1]},U=(o,k,d,t)=>{const e=n=>n*(Math.PI/180),c=n=>n*(180/Math.PI);o=e(o),d=e(d);const u=e(t-k),f=Math.sin(u)*Math.cos(d),S=Math.cos(o)*Math.sin(d)-Math.sin(o)*Math.cos(d)*Math.cos(u),h=Math.atan2(f,S);return(c(h)+360)%360},E=(o,k,d,t)=>{const c=n=>n*(Math.PI/180),u=n=>n*(180/Math.PI);o=c(o),k=c(k),t=c(t);const f=d/6371e3,S=Math.asin(Math.sin(o)*Math.cos(f)+Math.cos(o)*Math.sin(f)*Math.cos(t)),h=k+Math.atan2(Math.sin(t)*Math.sin(f)*Math.cos(o),Math.cos(f)-Math.sin(o)*Math.sin(S));return[u(S),u(h)]},O=(o,k,d,t)=>{const c=n=>n*(Math.PI/180),u=c(d-o),f=c(t-k),S=Math.sin(u/2)**2+Math.cos(c(o))*Math.cos(c(d))*Math.sin(f/2)**2;return 6371e3*(2*Math.atan2(Math.sqrt(S),Math.sqrt(1-S)))};return{buildDeltas:x,predict:N,mlpredict:A,asyncPredict:R}};export{D as J,J as u};
