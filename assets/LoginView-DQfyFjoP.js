import{d as N,N as o,R as T,r as P,o as _,c as y,a,e as s,n as g,u as c,S as x,W as U,w as Y,T as f,t as $,M as j,F as A}from"./index-CHJAEGcI.js";import{u as D}from"./theme-C29fj1GG.js";import{_ as V}from"./InputView.vue_vue_type_style_index_0_lang-ATCQTufT.js";import{a as F,_ as L,B as O}from"./ThemeSetting.vue_vue_type_style_index_0_lang-f-ARJF-_.js";import{m as q}from"./formValidator-OdL4bhgE.js";import{_ as z}from"./ButtonView.vue_vue_type_style_index_0_computed_true_lang-BNqv7PMf.js";import{a as I}from"./axios-BimPEqV4.js";import{h as M}from"./moment-C5S46NFB.js";const W={class:g(["bl-wrapper"])},G={class:"bl-opt"},J={style:{display:"flex","flex-flow":"row nowrap","justify-content":"flex-start","margin-bottom":"1rem"}},K={class:"form-group"},R={class:"form-group",style:{"margin-top":"2rem","font-size":"12px","text-align":"center"}},H={class:"copyright"},Q={key:0,class:"lgwait-overlay"},ne=N({__name:"LoginView",setup(X){const{vPassword:b,vEmail:h,checkValidation:k}=q(),n=o(!1),r=D(),i=o(""),l=o(""),v=o(!0),m=o(""),d=o(""),S=[m,d];m.value=h(i).message,d.value=b(l).message,T([i,l],()=>{m.value=h(i).message||"",d.value=b(l).message||"",v.value=k(S)},{immediate:!0});const u=o(!1),C=async()=>{if(u.value=!0,!v.value){const w={username:i.value,password:l.value};try{const e=await I.post(x.baseEnd+"api/Auth/login",w),p=e.data.message,t=e.data.auth.token,E=e.data.auth.id;r.notifyAlertSuccess("Berhasil",p,"OK",()=>{localStorage.setItem("authToken",t),localStorage.setItem("userid",E),window.location.href="/Dashboard"}),u.value=!1}catch(e){e.response&&(r.notifyAlertError("Gagal",e.response.data.message,"Oke",()=>{}),u.value=!1)}}},B=()=>{n.value=!n.value};return(w,e)=>{const p=P("font-awesome-icon");return _(),y(A,null,[a(F,{visible:n.value,"onUpdate:visible":e[0]||(e[0]=t=>n.value=t)},null,8,["visible"]),s("div",W,[s("div",{class:g(["bl-inner",c(r).mTheme])},[s("div",G,[a(L),s("a",{class:g([c(r).textTheme]),onClick:B,href:"javascript:void(0)"},[a(p,{icon:"gear"})],2)]),s("div",J,[a(O,{style:{"padding-left":"1rem"},"site-name":c(x).appName},null,8,["site-name"])]),s("form",{onSubmit:U(C,["prevent"])},[a(V,{"in-label":"E-mail / Username","in-placeholder":"example@email.com","in-type":"text","in-required":!0,"in-helper":m.value,modelValue:i.value,"onUpdate:modelValue":e[1]||(e[1]=t=>i.value=t)},null,8,["in-helper","modelValue"]),a(V,{"in-label":"Password","in-placeholder":"","in-type":"password","in-required":!0,"in-helper":d.value,modelValue:l.value,"onUpdate:modelValue":e[2]||(e[2]=t=>l.value=t)},null,8,["in-helper","modelValue"]),s("div",K,[a(z,{"bt-type":"submit","bt-disabled":v.value},{default:Y(()=>e[3]||(e[3]=[f("Sign-in")])),_:1},8,["bt-disabled"])]),s("div",R,[s("span",H,[s("i",null,[e[4]||(e[4]=f("Copyright ")),a(p,{icon:"copyright"}),f(" "+$(c(M)().format("YYYY"))+" ",1),e[5]||(e[5]=s("b",null,"FOL Production Jambi Data Center",-1)),e[6]||(e[6]=f(" all rights reserved"))])])])],32)],2)]),u.value?(_(),y("div",Q,e[7]||(e[7]=[s("div",{class:"lgwait-inner"},[s("img",{style:{width:"200px",height:"200px","object-fit":"cover"},src:"https://cdn.dribbble.com/users/1186261/screenshots/3718681/media/1df2396f1eaa146bcb7dd3e73c1dc77b.gif"}),s("p",null,"Please wait")],-1)]))):j("",!0)],64)}}});export{ne as default};
