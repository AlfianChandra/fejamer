import{d as B,N as a,R as M,r as R,o as y,b as E,w as x,e as l,n as V,u as A,a as r,T as C,W,c as z,J as G,F as I,S as F}from"./index-DwPoO6CT.js";import{u as J}from"./theme--P4wHxHs.js";import{a as L}from"./axios-BimPEqV4.js";import{_ as v}from"./InputView.vue_vue_type_style_index_0_lang-inVWyrEl.js";import{_ as j}from"./MainWrapperView.vue_vue_type_style_index_0_lang-BKMG5-4K.js";import{_ as H}from"./SelectView.vue_vue_type_style_index_0_lang-C7eZMcFy.js";import{_ as K}from"./ButtonView.vue_vue_type_style_index_0_computed_true_lang-DLZzS9Bc.js";import{m as O}from"./formValidator-OdL4bhgE.js";import{_ as Q}from"./UiErrorItem.vue_vue_type_style_index_0_lang-DKr97IVO.js";const X={class:"col-md-12"},Y={class:"col-md-5"},Z={class:"form-group"},me=B({__name:"CreateAccountView",setup(ee){const{vFullname:U,vPhone:P,vPassword:S,vEmail:T,vIsEmpty:k,checkValidation:q}=O(),n=J(),p=a(!0),c=a(),u=a(""),i=a(""),t=a(""),m=a(""),d=a(""),f=a(""),h=a(""),w=a(""),_=a(""),b=a(""),D=[f,w,b,h,_];M([t,u,m,d,i],()=>{f.value=U(u).message||"",h.value=k(i).message||"",w.value=T(t).message||"",_.value=S(m).message||"",b.value=P(d).message||"",p.value=q(D)},{immediate:!0});const N=async()=>{if(c.value="",!p.value)try{const o={fullname:u.value,password:m.value,email:t.value,phone:d.value,username:t.value,level:i.value},g=(await L.post(F.baseEnd+"api/user/createuser",o,{headers:F.headerSet})).data;n.notifyAlertSuccess("Success",g.message.content,"Dismiss",()=>{t.value="",u.value="",m.value="",i.value="",d.value=""})}catch(o){if(o.response)if(o.response.data.errors)if(o.response.data.errors.length!=0)c.value=o.response.data.errors,n.notifyAlertError("Failed","Got multiple errors. Check your inputs","Dismiss",()=>{});else{const e=o.response.data;n.notifyAlertError("Failed",e.message.content,"Dismiss",()=>{}),console.log(e)}else n.notifyAlertError("Failed",o.response.data.message.content,"Dismiss",()=>{})}};return(o,e)=>{const g=R("font-awesome-icon");return y(),E(j,{"context-title":"Create Account","context-desc":"Create a new account, whether it intended for Admin or User"},{default:x(()=>[l("div",X,[l("h3",{class:V(A(n).textTheme)},e[5]||(e[5]=[l("b",null,"User's Account Detail",-1)]),2),l("p",{class:V(A(n).textTheme)},[r(g,{icon:"info-circle"}),e[6]||(e[6]=C(" Fill all required fields to create an account "))],2)]),l("div",Y,[l("form",{onSubmit:W(N,["prevent"])},[r(v,{"in-label":"Full Name","in-required":!0,"in-type":"text","model-value":u.value,"onUpdate:modelValue":e[0]||(e[0]=s=>u.value=s),"in-placeholder":"User's full name. Text only","in-helper":f.value},null,8,["model-value","in-helper"]),r(v,{"in-label":"E-Mail","in-required":!0,"in-type":"text","model-value":t.value,"onUpdate:modelValue":e[1]||(e[1]=s=>t.value=s),"in-placeholder":"example@email.com","in-helper":w.value},null,8,["model-value","in-helper"]),r(v,{"in-label":"Password","in-required":!0,"in-type":"password","model-value":m.value,"onUpdate:modelValue":e[2]||(e[2]=s=>m.value=s),"in-placeholder":"Min. 8 chars password length","in-helper":_.value},null,8,["model-value","in-helper"]),r(H,{"in-helper":h.value,"model-value":i.value,"onUpdate:modelValue":e[3]||(e[3]=s=>i.value=s),"in-label":"Account Type","in-required":!0},{default:x(()=>e[7]||(e[7]=[l("option",{value:""},"Select...",-1),l("option",{value:"webmaster"},"Webmaster",-1),l("option",{value:"user"},"User",-1),l("option",{value:"customer"},"Customer",-1)])),_:1},8,["in-helper","model-value"]),r(v,{"in-label":"Phone","in-required":!0,"in-type":"text","model-value":d.value,"onUpdate:modelValue":e[4]||(e[4]=s=>d.value=s),"in-placeholder":"+628","in-helper":b.value},null,8,["model-value","in-helper"]),l("div",Z,[(y(!0),z(I,null,G(c.value,(s,$)=>(y(),E(Q,{key:$,"error-message":s.msg},null,8,["error-message"]))),128))]),r(K,{"bt-type":"submit","bt-disabled":p.value},{default:x(()=>e[8]||(e[8]=[C("Create!")])),_:1},8,["bt-disabled"])],32)])]),_:1})}}});export{me as default};
