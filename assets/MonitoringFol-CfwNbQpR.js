import{u as me}from"./theme-BP8oghdq.js";import{d as De,i as we}from"./index-B5d4h4Xc.js";import{_ as _e}from"./MainWrapperView.vue_vue_type_style_index_0_lang-B4WvikLd.js";import{_ as ve}from"./SelectView.vue_vue_type_style_index_0_lang-B2v132Sq.js";import{_ as z}from"./ButtonView.vue_vue_type_style_index_0_computed_true_lang-Cf9YJaW_.js";import{d as pe,c as V,G as ae,e as t,f as X,u as _,a as s,r as ye,n as le,t as K,H as $e,o as I,R as Y,w as g,N as n,Q as N,O as xe,P as Ie,_ as Me,F as ce,L as ke,U as Ce,b as be,K as he}from"./index-qcNF_6kw.js";import{u as fe}from"./http-D0ScjD5w.js";import{u as Ae}from"./spotModel-D-2VPYqv.js";import{_ as W}from"./InputView.vue_vue_type_style_index_0_lang-s2VZMm5a.js";import{_ as Oe}from"./BatteryView.vue_vue_type_style_index_0_computed_true_lang-BlZlokWC.js";import"./moment-zH0z38ay.js";const Ve={key:0,class:"mod-overlay"},Pe={class:"mod-heading"},Fe={class:"mod-body"},ge=pe({__name:"ModalEditorView",props:{modTitle:{type:String,required:!0},modShow:{type:Boolean,default:!0}},emits:["update:modShow"],setup(j,{emit:Q}){const w=me(),D=j,u=Q,x=()=>{u("update:modShow",!D.modShow)};return(U,$)=>{const c=ye("font-awesome-icon");return j.modShow?(I(),V("div",Ve,[t("div",{class:le(["mod-content",_(w).mTheme])},[t("button",{onClick:x,type:"button",class:"mod-dismiss",style:X({color:_(w).accentColor})},[s(c,{icon:"times"})],4),t("div",Pe,[t("h4",{class:le(_(w).textTheme)},[t("b",null,K(j.modTitle),1)],2)]),t("div",Fe,[$e(U.$slots,"default")])],2)])):ae("",!0)}}}),Le={class:"itemlist-wrapper"},Ne={class:"itemlist-group"},Ue=pe({__name:"ItemList",props:{itemName:{type:String,required:!0},itemDesc:{type:String,required:!0},itemId:{type:String,required:!0},itemSafemark:{type:Number,default:0,required:!0}},emits:["onItemSelect"],setup(j,{emit:Q}){const w=me(),D=Q,u=j,x=()=>{D("onItemSelect",{id:u.itemId,name:u.itemName,desc:u.itemDesc})};return(U,$)=>{const c=ye("font-awesome-icon");return I(),V("div",Le,[t("div",Ne,[t("span",{style:X({color:_(w).accentColor})},[t("b",null,K(j.itemName),1)],4),t("span",{style:X({color:_(w).accentColor})},[s(c,{icon:"map-pin"}),Y(" "+K(j.itemDesc),1)],4)]),s(z,{onClick:x,"bt-disabled":!1,"bt-size":"small"},{default:g(()=>[s(c,{icon:"plus"})]),_:1})])}}}),Re={class:"chart-container"},qe={class:"col-md-4"},ze={class:"loaderparent"},je=pe({__name:"LiveMonitorChart",props:{dateFilter:{type:String,required:!0},timeFilter:{type:Number,required:!0}},setup(j){const Q=j,w=n(!0),D=n(null),u=n(null),x=me(),U=n(15),$=n([]),c=n(0),y=n("Building chart..."),M=n("Initializing..."),S=n(0),P=n({tooltip:{trigger:"axis",axisPointer:{type:"cross"}}}),a=v=>new Date(v).toISOString(),m=async()=>new Promise((v,f)=>{fe().httpGet("api/Spot/getspots").then(h=>{v(h)}).catch(h=>{console.error(h),f(h)})});N(()=>D.value,async()=>{R(),await m().then(v=>{$.value=v})});const R=()=>{if(c.value=5,D.value){const v=we(D.value);u.value=v,u.value.setOption(P.value)}},B=async()=>new Promise(async(v,f)=>{try{const h=[],H=new Set,q=$.value.length;let ee=0;M.value="Setting up...";for(let b=0;b<$.value.length;b++){M.value=`Applying filter for ${$.value[b].spotName}...`;const E={id:$.value[b].id+"",date:a(Q.dateFilter),timespan:Q.timeFilter+"",firstrequest:w.value},k=await fe().httpPost("api/Data/getsingledata",E);for(let G=0;G<k.length;G++)setTimeout(()=>{S.value++},1);const Z=k.map(G=>{const se=G.timestamp.replace(".",":").split("T")[1],[re,ue]=se.split(":"),d=`${re}:${ue}`;return H.add(d),d}),C=k.map(G=>parseFloat(G.psiValue));h.push({psies:C,categories:Z}),ee+=1;const F=ee/q*90;c.value=Math.round(F)}const J=Array.from(H).sort((b,E)=>{const[k,Z]=b.split(":").map(Number),[C,F]=E.split(":").map(Number);return k!==C?k-C:Z-F}),oe=h.map((b,E)=>{const k={};b.categories.forEach((C,F)=>{k[C]=b.psies[F]});const Z=J.map(C=>k[C]!==void 0?parseFloat(k[C]):null);return{name:`${$.value[E].spotName}`,type:"line",data:Z,smooth:!1,sampling:"average",symbol:"none",lineStyle:{width:1.5},endLabel:{show:!0,fontSize:12,color:"#fff",offset:[-5,0],padding:3,borderRadius:3,textBorderWidth:0,backgroundColor:"inherit",formatter:function(C){let F=0;const G=h[C.seriesIndex].psies.length;for(let te=0;te<G;te++)h[C.seriesIndex].psies[te]!==null&&(F=h[C.seriesIndex].psies[te]);return F.toFixed(2)}}}}),A={backgroundColor:"transparent",legend:{data:oe.map(b=>({name:b.name,icon:"circle",textStyle:{color:"inherit"}}))},xAxis:{type:"category",data:J,scale:!0,alignTicks:!0,name:"Time",axisPointer:{value:"2016-10-7",snap:!0,label:{show:!0,formatter:function(b){return b.value}},handle:{show:!0}},axisTick:{show:!0,alignWithLabel:!0},axisLabel:{color:`${x.accentColor}`,rotate:-45,interval:b=>{const[E,k]=J[b].split(":").map(Number);return k%U.value===0},formatter:function(b){return b}},boundaryGap:!0,splitLine:{show:!0,lineStyle:{color:"#55555555"}}},yAxis:{type:"value",axisTick:{show:!0},axisLine:{show:!0},scale:!0,splitLine:{show:!0,lineStyle:{color:"#55555555"}}},series:oe};v(A)}catch(h){console.error(h),f(h)}});return N(()=>$.value,async()=>{await B().then(v=>{u.value.setOption(v),M.value="Drawing series...",c.value=99.99,setTimeout(()=>{c.value=100,S.value=0},2e3)})}),N(()=>U.value,async()=>{c.value=5,M.value="Setting up...",y.value="Options & filter updated. Rebuilding chart with new series...",u.value&&(u.value=null),R(),setTimeout(async()=>{await B().then(v=>{u.value.setOption(v),c.value=99.99,M.value="Drawing series...",setTimeout(()=>{c.value=100,S.value=0},2e3)})},1e3)}),xe(()=>{R()}),Ie(()=>{D.value&&De(D.value)}),(v,f)=>(I(),V("div",Re,[f[3]||(f[3]=t("h4",{style:{padding:"15px"}},"Live Monitor Chart",-1)),t("div",qe,[s(ve,{"in-label":"X-Axis Time Split","model-value":U.value,"onUpdate:modelValue":f[0]||(f[0]=h=>U.value=h)},{default:g(()=>f[1]||(f[1]=[t("option",{value:"5"},"5 Minutes",-1),t("option",{value:"10"},"10 Minutes",-1),t("option",{value:"15"},"15 Minutes",-1),t("option",{value:"30"},"30 Minutes",-1),t("option",{value:"45"},"45 Minutes",-1),t("option",{value:"60"},"1 Hour",-1)])),_:1},8,["model-value"])]),t("div",{ref_key:"chart",ref:D,style:{width:"100%",position:"relative",height:"90%"}},null,512),c.value!=100?(I(),V("div",{key:0,class:le(["chartloader",[`${_(x).mTheme}`]])},[f[2]||(f[2]=t("img",{style:{"border-radius":"1000px"},src:"https://digitalsynopsis.com/wp-content/uploads/2016/06/loading-animations-preloader-gifs-ui-ux-effects-10.gif"},null,-1)),t("span",{class:le([`${_(x).textTheme}`])},K(y.value)+" ("+K(S.value)+" objects collected)",3),t("span",{style:X({color:`${_(x).accentColorSecondary}`})},K(M.value),5),t("div",ze,[t("span",{style:X({width:`${c.value}%`,background:`${_(x).accentColor}`}),class:"loaderinner"},null,4)])],2)):ae("",!0)]))}}),Be=Me(je,[["__scopeId","data-v-3c2666ce"]]),He={style:{display:"flex","flex-flow":"column","margin-bottom":"1rem"}},Ee=["id"],Ge={key:0,style:{display:"flex","flex-flow":"row nowrap","justify-content":"flex-end",gap:"0.5rem","margin-bottom":"1.5rem"}},Ye={contenteditable:"true",spellcheck:"false"},We=pe({__name:"ChartView2",props:{filterDate:{type:String,required:!0},filterTime:{type:Number,required:!0},spotId:{type:String,required:!0},chartName:{type:String,required:!0},yMax:{type:Number,required:!0,default:350},yMin:{type:Number,required:!0,default:0},gridview:{type:Boolean,default:!1},tickAmount:{type:Number,default:100},dataFetchInterval:{type:Number,default:1e4},curveType:{type:Boolean,default:!1},safeMark:{type:Number,default:0},isDataPaused:Boolean,showUis:{type:Boolean,default:!0},yInterval:{type:Number,default:0}},emits:["onChartClose","onChartReady","onPause","onResume","onDrawingMode"],setup(j,{emit:Q}){const w=n([]),D=n([]),u=Q,x=me(),U=n(!1),$=n(!0),c=n(null),y=n(null),M=n(!1),S=n(!1);let P;const a=j,m=n(a.safeMark),R=n(!1),B=n(a.yMax),v=n(a.yMin),f=n(a.tickAmount),h=n(50),H=n(a.dataFetchInterval),q=n(a.curveType),ee=n(!0),J=n(!0);function oe(d,i){return{tooltip:{show:!0,trigger:"item",axisPointer:{type:"cross",axis:"auto",label:{show:!0}}},xAxis:[{type:"category",interval:f.value,axisLine:{show:!0,lineStyle:{color:x.accentColor}},splitLine:{show:J,lineStyle:{color:"#ddd",type:"dashed"}},axisTick:{show:!0},boundaryGap:!1,axisLabel:{rotate:45},data:[]}],yAxis:[{type:"value",min:v.value,max:d,minorTick:{show:!0},axisTick:{show:!0},minorSplitLine:{show:ee,lineStyle:{color:"#ddd",type:"dashed"}},interval:a.yInterval,axisLine:{show:!0,lineStyle:{color:x.accentColor}},axisLabel:{formatter:"{value}"}}],series:[{name:"PSI Data",type:"line",symbol:"none",data:[],smooth:i,lineStyle:{width:1.2,join:"miter",miterLimit:3,cap:"round"},tooltip:{position:["50%","50%"]},endLabel:{show:!0,distance:0,formatter:function(L){const o=L.dataIndex,e=A.value.series[0].data;console.log(e);let r=0;for(let O=0;O<e.length;O++)e[O]>r&&(r=e[O]);let l=0,p=0;for(let O=0;O<e.length;O++){const T=parseInt(e[O]);(parseInt(a.spotId)==1&&T>=120&&T<=200||parseInt(a.spotId)==2&&T>=45&&T<=100||parseInt(a.spotId)==3&&T>=30&&T<=75||parseInt(a.spotId)==4&&T>=20&&T<=30)&&(l+=T,p++)}const ne=l/p,ie=e.length-1;if(o===ie){const O=L.value,T=r,de=(T-O)/T*100;return`Curr: ${L.value}
Avg: ${ne.toFixed(2)}
Del: ${de>0?"-"+de.toFixed(2):"+"+de.toFixed(2)}%`}return""},color:"black",backgroundColor:"white",padding:5,borderRadius:5}}]}}N(()=>m.value,()=>{var d;A.value.series[1].markLine.data[0].yAxis=m.value,(d=y.value)==null||d.setOption(A.value)});const A=n(oe(a.yMax,a.curveType));N(()=>[B.value,v.value,f.value,H.value,q.value,h.value,ee.value,J.value],()=>{y.value.setOption(A.value)});const b=()=>{var d;!y.value&&c.value&&(y.value=we(c.value)),(d=y.value)==null||d.setOption(A.value)},E=d=>new Date(d).toISOString(),k=async()=>{var i,L;const d={id:a.spotId+"",date:E(a.filterDate),timespan:a.filterTime+""};try{const e=await fe().httpPost("api/Data/getalldata2",d),r=e.map(p=>{const ie=p.timestamp.replace(".",":").split("T")[1],[O,T]=ie.split(":");return`${O}:${T}`}),l=e.map(p=>parseFloat(p.psiValue).toFixed(2)).map(p=>parseFloat(p));w.value=r,D.value=l,l.length?(M.value=!1,A.value.xAxis[0].data=r,A.value.series[0].data=l,(i=y.value)==null||i.setOption(A.value)):(M.value=!0,$.value=!1,A.value.xAxis[0].data=[],A.value.series[0].data=[],(L=y.value)==null||L.setOption(A.value))}catch(o){console.error("Error fetching chart data:",o)}},Z=()=>{const d=new Date().toISOString().slice(0,10);if(a.filterDate.slice(0,10)!==d){P&&clearInterval(P);return}else P&&clearInterval(P),P=setInterval(()=>{S.value||k()},H.value)};N(()=>c.value,()=>{c.value&&b()}),N(()=>a.gridview,()=>{y.value&&setTimeout(()=>{var d;(d=y.value)==null||d.resize()},500)}),N(()=>a.dataFetchInterval,()=>{H.value=a.dataFetchInterval,Z()}),N(()=>[c.value],()=>{k(),Z()}),Ie(()=>{clearInterval(P)});let C=null;N(()=>[a.filterDate,a.filterTime,a.yMax,a.yMin,a.tickAmount,a.curveType],()=>{C&&clearTimeout(C),C=setTimeout(()=>{B.value=a.yMax,v.value=a.yMin,f.value=a.tickAmount,q.value=a.curveType,H.value=a.dataFetchInterval,A.value=oe(a.yMax,a.curveType),$.value=!0,U.value=!1},300)});let F=null;N(()=>[B.value,v.value,f.value,H.value,q.value],()=>{F&&clearTimeout(F),F=setTimeout(()=>{k()},500)}),x.$subscribe((d,i)=>{setTimeout(()=>{k()},2e3)});const G=()=>{u("onChartClose",a.spotId)},te=()=>{R.value=!R.value},se=()=>{R.value=!1},re=()=>{S.value=!S.value,S.value?u("onPause",a.spotId):u("onResume",a.spotId)};N(()=>[a.isDataPaused],()=>{S.value=a.isDataPaused,S.value?u("onPause",a.spotId):u("onResume",a.spotId)}),N(()=>S.value,()=>{S.value?u("onPause",a.spotId):u("onResume",a.spotId)}),N(()=>x.asideVisible,()=>{y.value&&setTimeout(()=>{var d;(d=y.value)==null||d.resize()},500)});const ue=()=>{u("onDrawingMode",a.spotId)};return xe(()=>{console.log("DATA",a.filterDate)}),(d,i)=>{const L=ye("font-awesome-icon");return I(),V(ce,null,[s(ge,{"mod-show":R.value,"onUpdate:modShow":i[9]||(i[9]=o=>R.value=o),"mod-title":`${a.chartName} Preferences`},{default:g(()=>[s(W,{"in-type":"number","in-label":"Safemark","model-value":m.value,"onUpdate:modelValue":i[0]||(i[0]=o=>m.value=o)},null,8,["model-value"]),s(W,{"in-type":"number","in-label":"Y-Axis Max Tick","model-value":B.value,"onUpdate:modelValue":i[1]||(i[1]=o=>B.value=o)},null,8,["model-value"]),s(W,{"in-type":"number","in-label":"Y-Axis Min Tick","model-value":v.value,"onUpdate:modelValue":i[2]||(i[2]=o=>v.value=o)},null,8,["model-value"]),s(W,{"in-type":"number","in-label":"Y-Axis Interval","model-value":h.value,"onUpdate:modelValue":i[3]||(i[3]=o=>h.value=o)},null,8,["model-value"]),s(W,{"in-type":"number","in-label":"X-Axis Tick Amount","model-value":f.value,"onUpdate:modelValue":i[4]||(i[4]=o=>f.value=o)},null,8,["model-value"]),s(W,{"in-type":"number","in-label":"Data Update Interval (Milisecond)","model-value":H.value,"onUpdate:modelValue":i[5]||(i[5]=o=>H.value=o)},null,8,["model-value"]),s(ve,{"in-label":"Curve Type","model-value":q.value,"onUpdate:modelValue":i[6]||(i[6]=o=>q.value=o)},{default:g(()=>i[10]||(i[10]=[t("option",{value:"true"},"Smooth",-1),t("option",{value:"false"},"Straight",-1)])),_:1},8,["model-value"]),t("div",He,[t("label",null,[ke(t("input",{type:"checkbox","onUpdate:modelValue":i[7]||(i[7]=o=>ee.value=o)},null,512),[[Ce,ee.value]]),i[11]||(i[11]=Y(" Show Y-Axis Minor Split "))]),t("label",null,[ke(t("input",{type:"checkbox","onUpdate:modelValue":i[8]||(i[8]=o=>J.value=o)},null,512),[[Ce,J.value]]),i[12]||(i[12]=Y(" Show X-Axis Split "))])]),s(z,{onClick:se,"bt-type":"button","bt-disabled":!1},{default:g(()=>i[13]||(i[13]=[Y("Dismiss")])),_:1})]),_:1},8,["mod-show","mod-title"]),t("div",{id:`chart${a.spotId}`,style:X({width:a.gridview?_(x).asideVisible?"680px":"600.5px":"100%"}),class:le(["chartwrap",S.value?"chartwrap-paused":""])},[a.showUis?(I(),V("div",Ge,[s(z,{onClick:ue,"bt-type":"button","bt-size":"small","bt-disabled":!1},{default:g(()=>[s(L,{icon:"edit"})]),_:1}),s(z,{onClick:re,"bt-type":"button","bt-size":"small","bt-disabled":!1},{default:g(()=>[s(L,{icon:S.value?"pause":"play"},null,8,["icon"])]),_:1}),D.value.length?(I(),be(z,{key:0,onClick:te,"bt-disabled":!1,"bt-type":"button","bt-size":"small"},{default:g(()=>[s(L,{icon:"sliders"})]),_:1})):ae("",!0),s(z,{onClick:G,"bt-disabled":!1,"bt-type":"button","bt-size":"small"},{default:g(()=>[s(L,{icon:"close"})]),_:1})])):ae("",!0),s(Oe,{"id-spot":parseInt(a.spotId)},null,8,["id-spot"]),t("h4",{style:X({textAlign:"center",color:_(x).accentColor})},[t("b",Ye,"SPOT: "+K(a.chartName),1)],4),D.value.length?(I(),V("p",{key:1,style:{"text-align":"center","margin-bottom":"5px"},class:le(_(x).textTheme)}," Displaying data for last "+K(a.filterTime)+" hour(s) on "+K(a.filterDate),3)):ae("",!0),t("div",{ref_key:"chartRef",ref:c,style:{width:"100%",height:"600px"}},null,512)],14,Ee)],64)}}}),Xe={key:0,class:"live-window"},Ke={key:1,class:"drw-wd"},Qe={class:"row"},Je={style:{display:"flex","flex-flow":"row nowrap","justify-content":"flex-end"}},Ze={class:"col-md-12"},et={class:"col-md-12"},tt={style:{display:"flex","flex-flow":"row wrap",gap:"0.3rem"}},at={style:{display:"flex","flex-flow":"row nowrap","justify-content":"flex-end"}},lt={class:"spot-reading-control"},ot={class:"spot-basket"},st=["onClick","onDblclick"],nt={key:0,style:{"margin-top":"1rem",display:"flex","flex-flow":"row nowrap","justify-content":"flex-end"}},bt=pe({__name:"MonitoringFol",setup(j){const Q=Ae(),w=me();w.asideToggle(!0);const D=n(null),u=n(!1),x=n(300),U=n(0),$=n(30),c=n(1e4),y=n(!1),M=n(""),S=n("straight"),P=n(24),a=n(!1),m=n([]),R=n(1),B=()=>{R.value<=Object.keys(m).length&&setTimeout(()=>{R.value++,B()},1e3)},v=()=>{const o=new Date,e=o.getFullYear(),r=String(o.getMonth()+1).padStart(2,"0"),l=String(o.getDate()).padStart(2,"0"),p=`${e}-${r}-${l}`;M.value=p};xe(async()=>{await Q.getSpots().then(o=>{v(),setTimeout(()=>{m.value=o,console.log("SPOTS",m.value),B()},1e3)})});const f=()=>{a.value=!0},h=o=>{a.value=!1,m.value.some(r=>r[o.id])?w.notifyShowError("Selected spot already displayed"):m.value.push({[o.id]:o})},H=o=>{delete m.value[o]},q=n(!1),ee=()=>{q.value=!q.value},J=()=>{q.value=!1,w.notifyShow("Options has been applied")},oe=o=>{const e=document.getElementById("chart"+o);e&&e.scrollIntoView({behavior:"smooth",block:"start"})},A=()=>{u.value=!u.value},b=o=>{m.value=m.value.filter(e=>!e[o])};let E=n([]);const k=o=>{E.value.push({id:o});const e=`spotdata-${o}`,r=document.querySelector(`.${e}`);r?(r.style.background="red",r.style.color="white"):console.warn(`Element dengan class ${e} gak ditemukan bro!`)},Z=o=>{const e=`spotdata-${o}`,r=document.querySelector(`.${e}`);r?(r.style.background="#000",r.style.color="#fff"):console.warn(`Element dengan class ${e} gak ditemukan bro!`);const l=E.value.findIndex(p=>p.id===o);E.value.splice(l,1)},C=()=>{y.value=!1},F=()=>{y.value=!0},G=o=>new Date(o).toISOString(),te=async o=>new Promise(async(e,r)=>{try{const l={id:o,date:G(M.value),timespan:P.value+"",firstrequest:!1},p=await fe().httpPost("api/Data/getsingledata",l),ne=p.map(O=>{const Se=O.timestamp.replace(".",":").split("T")[1],[de,Te]=Se.split(":");return`${de}:${Te}`}),ie=p.map(O=>parseFloat(O.psiValue).toFixed(2));e({cats:ne,series:ie})}catch(l){r(l)}}),se=n(!1),re=o=>{y.value=!0,se.value=!0,setTimeout(()=>{ue(o)},3e3)},ue=async o=>{const e=we(D.value);await te(o).then(r=>{const l=r.cats,p=r.series,ne={graphic:[{type:"rect",shape:{x:0,y:0,width:e.getWidth(),height:e.getHeight()},style:{fill:"transparent"},onmousemove:function(ie){}}],backgroundColor:"#fff",tooltip:{trigger:"axis"},xAxis:{type:"category",data:l},yAxis:{type:"value",min:0,max:350},series:[{type:"line",data:p,color:l.map(()=>`${w.accentColor}`)}]};e.setOption(ne),e.setOption({yAxis:{name:"Pressure (PSI)"}})})},d=()=>{se.value=!1},i=n(!1),L=()=>{i.value=!i.value,y.value=!y.value};return(o,e)=>{const r=ye("font-awesome-icon");return I(),V(ce,null,[i.value?(I(),V("div",Xe,[t("div",{class:le(["live-window-inner",[`${_(w).mTheme}`]])},[t("button",{style:X({color:`${_(w).accentColor}`}),type:"button",class:"drwclose",onClick:L},[s(r,{icon:"close"})],4),s(Be,{"date-filter":M.value,"time-filter":P.value},null,8,["date-filter","time-filter"])],2)])):ae("",!0),se.value?(I(),V("div",Ke,[t("div",{class:"drw-inner",style:X({background:`${_(w).themeDarkColor}`})},[t("button",{onClick:d,type:"button",style:X({color:`${_(w).accentColor}`}),class:"drwclose"},[s(r,{icon:"close"})],4),t("div",{ref_key:"eCharts",ref:D,style:{width:"100%",height:"100%",position:"relative"}},null,512)],4)])):ae("",!0),s(ge,{"mod-show":a.value,"onUpdate:modShow":e[0]||(e[0]=l=>a.value=l),"mod-title":"Select spot"},{default:g(()=>[(I(!0),V(ce,null,he(Object.keys(m.value),l=>(I(),be(Ue,{key:l,onOnItemSelect:h,"item-id":m.value[l].id,"item-name":m.value[l].name,"item-desc":m.value[l].desc,"item-safemark":m.value[l].safemark},null,8,["item-id","item-name","item-desc","item-safemark"]))),128))]),_:1},8,["mod-show"]),s(ge,{"mod-show":q.value,"onUpdate:modShow":e[6]||(e[6]=l=>q.value=l),"mod-title":"Global Chart Preference"},{default:g(()=>[t("p",{style:X({color:_(w).accentColor})},"These parameters applies to all displayed charts",4),s(W,{"in-label":"Y-Axis Max Tick Range","in-type":"number","model-value":x.value,"onUpdate:modelValue":e[1]||(e[1]=l=>x.value=l)},null,8,["model-value"]),s(W,{"in-label":"Y-Axis Min Tick Range","in-type":"number","model-value":U.value,"onUpdate:modelValue":e[2]||(e[2]=l=>U.value=l)},null,8,["model-value"]),s(W,{"in-label":"X-Axis Tick Amount","in-helper":"Greater value produces denser tick rates while lesser value loosen it but trims certain data in some points of time","in-type":"number","model-value":$.value,"onUpdate:modelValue":e[3]||(e[3]=l=>$.value=l)},null,8,["model-value"]),s(W,{"in-label":"Data Update Interval (Milisecond)","in-helper":"Higher value increases the delay while lower value decreases it. Warning: Lower value require more resources and may significantly affect client-side performance","in-type":"number","model-value":c.value,"onUpdate:modelValue":e[4]||(e[4]=l=>c.value=l)},null,8,["model-value"]),s(ve,{"in-label":"Curve Type","model-value":S.value,"onUpdate:modelValue":e[5]||(e[5]=l=>S.value=l)},{default:g(()=>e[9]||(e[9]=[t("option",{value:"smooth"},"Smooth",-1),t("option",{value:"straight"},"Straight",-1),t("option",{value:"monotoneCubic"},"Monotone Cubic",-1),t("option",{value:"stepline"},"Stepline",-1),t("option",{value:"linestep"},"Linestep",-1)])),_:1},8,["model-value"]),s(z,{onClick:J,"bt-type":"button","bt-disabled":!1},{default:g(()=>e[10]||(e[10]=[Y("Dismiss")])),_:1})]),_:1},8,["mod-show"]),s(_e,{"context-title":"Monitoring FOL"},{default:g(()=>[t("div",Qe,[t("div",Je,[s(z,{onClick:ee,"bt-size":"small","bt-disabled":!1},{default:g(()=>[s(r,{icon:"sliders"}),e[11]||(e[11]=Y(" Global Chart Preferences"))]),_:1})]),t("div",Ze,[s(W,{"in-type":"date","in-label":"Date Filter","model-value":M.value,"onUpdate:modelValue":e[7]||(e[7]=l=>M.value=l)},null,8,["model-value"]),s(ve,{"in-label":"Time Range Filter","model-value":P.value,"onUpdate:modelValue":e[8]||(e[8]=l=>P.value=l)},{default:g(()=>e[12]||(e[12]=[t("option",{value:"1"},"1 Hour",-1),t("option",{value:"3"},"3 Hours",-1),t("option",{value:"6"},"6 Hours",-1),t("option",{value:"12"},"12 Hours",-1),t("option",{value:"24"},"24 Hours",-1)])),_:1},8,["model-value"]),t("div",et,[t("div",tt,[s(z,{onClick:L,"bt-size":"small","bt-disabled":!1},{default:g(()=>[s(r,{icon:"chart-line"}),e[13]||(e[13]=Y(" Live Data Monitoring"))]),_:1})]),e[14]||(e[14]=t("hr",null,null,-1))]),t("div",at,[s(z,{onClick:f,"bt-type":"button","bt-disabled":!1,"bt-size":"small"},{default:g(()=>[s(r,{icon:"add"}),e[15]||(e[15]=Y(" Add Chart"))]),_:1})]),t("div",lt,[s(z,{onClick:C,"bt-disabled":!1,"bt-type":"button","bt-size":"small"},{default:g(()=>[s(r,{icon:"play"}),e[16]||(e[16]=Y(" Resume All"))]),_:1}),s(z,{onClick:F,"bt-disabled":!1,"bt-type":"button","bt-size":"small"},{default:g(()=>[s(r,{icon:"pause"}),e[17]||(e[17]=Y(" Pause All"))]),_:1})]),t("div",ot,[(I(!0),V(ce,null,he(Object.keys(m.value),l=>(I(),V("span",{title:"Click to navigate to this spot",key:l,class:le(["spot-data",`spotdata-${l}`]),onClick:p=>oe(l),onDblclick:p=>H(l)},[t("span",null,K(m.value[l].name+" - "+m.value[l].desc),1)],42,st))),128))]),Object.keys(m.value)?(I(),V("div",nt,[s(z,{onClick:A,"bt-disabled":!1,"bt-size":"small"},{default:g(()=>[s(r,{icon:u.value?"grip-vertical":"expand"},null,8,["icon"]),Y(" "+K(u.value?"Grid chart view":"Full chart view"),1)]),_:1})])):ae("",!0),t("div",{style:{},class:le(u.value?"chart-basket-gridview":"chart-basket-fullview")},[(I(!0),V(ce,null,he(m.value,(l,p)=>(I(),V("div",{key:p},[p<R.value?(I(),be(We,{key:0,onOnChartReady:B,id:"chart"+Object.keys(l)[0],"chart-name":l.name,"filter-date":M.value,"filter-time":P.value,"safe-mark":l.safemark,"spot-id":l.id,"curve-type":S.value,"y-max":l.yMax,"y-min":U.value,"tick-amount":$.value,"y-interval":l.yInterval,"data-fetch-interval":c.value,gridview:u.value,"is-data-paused":y.value,onOnDrawingMode:re,onOnChartClose:b,onOnPause:k,onOnResume:Z},null,8,["id","chart-name","filter-date","filter-time","safe-mark","spot-id","curve-type","y-max","y-min","tick-amount","y-interval","data-fetch-interval","gridview","is-data-paused"])):ae("",!0)]))),128))],2)])])]),_:1})],64)}}});export{bt as default};
